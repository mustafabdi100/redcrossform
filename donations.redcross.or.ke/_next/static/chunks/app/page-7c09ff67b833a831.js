(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6647:function(){},1554:function(e,n,t){Promise.resolve().then(t.bind(t,2464))},2464:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return page}});var o=t(7437),l=t(2265),a=t(6691),s=t.n(a),i=t(4033),r=t(732),d=t(3724),components_Button=e=>{let{children:n,onClick:t,variant:l="outlined",className:a="",disabled:s=!1,loading:i=!1}=e;return(0,o.jsxs)(d.Z,{variant:l,onClick:t,className:a,sx:{borderRadius:0,":hover":{bgcolor:"#ed1c24",color:"white"}},disabled:s,children:[i&&(0,o.jsx)("span",{className:"text-white",children:"Donating..."}),!i&&n]})},c=t(4081),u=t(1045),m=t(2510),p=t(4142),components_SelectDropdown=e=>{let{dropDownOptions:n,selectedOption:t,onChange:l}=e;return(0,o.jsxs)(c.Z,{className:"w-[300px] outline-[#ed1c24]",children:[(0,o.jsx)(m.Z,{id:"demo-simple-select-label",children:"Select a cause"}),(0,o.jsx)(u.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:t,label:"Select a cause",onChange:e=>l(e),children:n.map(e=>{let{id:n,label:t,value:l}=e;return(0,o.jsx)(p.Z,{value:l,children:t},n)})})]})},x=t(326),h=t(7668),v=t(5631),y=t(4986),j=t(8956),f=t(6882),g=t(2583),b=t(2277),C=t(3759),N=t(715),w=t(2582),k=t(4562),A=t(1469),Z=t(4172),S=t(2658),D=t(529),components_RadioButton=e=>{let{formLabel:n,radioOptions:t,onChange:l,selectedOption:a}=e;return(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(Z.Z,{id:"demo-row-radio-buttons-group-label",children:n}),(0,o.jsx)(D.Z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",className:"md:space-x-[40px]",children:t.map(e=>{let{label:n,value:t}=e;return(0,o.jsx)(k.Z,{value:t,control:(0,o.jsx)(S.Z,{sx:{"&.Mui-checked":{color:"#ed1c24"}},onChange:()=>l(t),checked:a===t}),label:n},t)})})]})},E=t(1833);let F=[{label:"ONE TIME",value:"one-time"},{label:"MONTHLY",value:"monthly"}],O=[{label:"KES",value:"KES"},{label:"USD",value:"USD"}],Label=e=>{let{processingFee:n,currency:t}=e;return(0,o.jsxs)("div",{className:"text-sm text-gray-500",children:["Please add"," ",(0,o.jsx)("span",{className:"text-[#ed1c24]",children:"".concat(t," ").concat(n)})," to cover processing fees & other expenses associated with my donation"]})};var components_DonationFormAmount=e=>{let{}=e,[n,t]=(0,l.useState)(0),[a,s]=(0,l.useState)(!1),{donationFormDetails:i,setDonateAs:r,setSelectedCurrency:c,setDonationOption:u,toggleHandleProcessingFee:m,setDonationAmount:p,setPledgeFrequency:x}=(0,l.useContext)(E.DonationFormContext);return(0,l.useEffect)(()=>{x(0===n?"one-time":"monthly")},[n]),(0,o.jsxs)("div",{className:"py-[10px] md:pb-[50px] md:px-5 flex flex-col space-y-[20px]",children:[(0,o.jsx)(components_RadioButton,{formLabel:"Select donate as",radioOptions:[{label:"Individual",value:"private"},{label:"Organisation",value:"organisation"}],onChange:e=>r(e),selectedOption:null==i?void 0:i.donateAs}),(0,o.jsx)(components_RadioButton,{formLabel:"Select donation option",radioOptions:[{label:"Donate Now",value:"donate-now"},{label:"Make a Pledge",value:"make-pledge"}],onChange:e=>u(e),selectedOption:null==i?void 0:i.donationOption}),(null==i?void 0:i.donationOption)!=="donate-now"&&(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(g.Z,{value:n,onChange:(e,n)=>{console.log({value:n}),t(n)},"aria-label":"basic tabs example",className:"flex w-full",children:F.map(e=>{let{label:n,value:t}=e;return(0,o.jsx)(b.Z,{className:"flex-auto",label:n},n)})})})}),(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("p",{className:"flex text-sm text-gray-500 mb-[10px]",children:"Toggle currency"}),(0,o.jsx)(C.Z,{variant:"outlined",children:O.map(e=>{let{label:n,value:t}=e;return(0,o.jsx)(d.Z,{sx:{backgroundColor:t===(null==i?void 0:i.selectedCurrency)&&"#ed1c24 !important"||"",color:t===(null==i?void 0:i.selectedCurrency)&&"white !important"||""},onClick:()=>{c(t)},children:n},t)})})]})}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(null==i?void 0:i.recommended.length)===0&&(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"my-[20px] text-gray-600",children:"Donation amount"}),(0,o.jsx)(N.Z,{placeholder:"Enter amount",value:null==i?void 0:i.donationAmount,onChange:e=>p(e.target.value)})]}),i&&i.recommended.length>0&&(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"mb-[10px] text-gray-600",children:"Select an amount"}),(0,o.jsx)("div",{className:"flex flex-wrap space-x-2",children:[...null==i?void 0:i.recommended,"Other"].map(e=>(0,o.jsx)("div",{className:"flex mb-[10px]",children:(0,o.jsx)(d.Z,{variant:"outlined",sx:{backgroundColor:e===(null==i?void 0:i.donationAmount)&&"#ed1c24 !important"||"",color:e===(null==i?void 0:i.donationAmount)&&"white !important"||""},onClick:()=>{"Other"===e?(s(!0),p("")):(s(!1),p(e))},children:(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"hidden md:inline-block",children:"".concat("Other"===e?"":null==i?void 0:i.selectedCurrency," ")})," ",e]})})},e))}),(0,o.jsx)("div",{className:"",children:a&&(0,o.jsx)(N.Z,{placeholder:"Enter amount",value:null==i?void 0:i.donationAmount,onChange:e=>p(e.target.value)})})]})]}),(null==i?void 0:i.donationAmount)&&(0,o.jsx)("div",{children:(0,o.jsx)(w.Z,{children:(0,o.jsx)(k.Z,{control:(0,o.jsx)(A.Z,{onClick:m,checked:null==i?void 0:i.handleProcessingFee}),label:(0,o.jsx)(Label,{processingFee:null==i?void 0:i.processingFee,currency:null==i?void 0:i.selectedCurrency})})})})]})},P=t(1975),_=t(405),components_DonationFormPersonalDetails=e=>{let{}=e,{donationFormDetails:n,setDonateAnonymously:t,setFirstName:a,setLastName:s,setCompanyName:i,setAddress:d,setCountry:x,setCounty:h,setEmail:v,setPhoneNumber:y,setEmailError:j}=(0,l.useContext)(E.DonationFormContext),{countries:f,counties:g}=(0,l.useContext)(_.RedcrossCausesContext),b=(null==n?void 0:n.donateAs)==="private"&&(null==n?void 0:n.donationOption)==="donate-now";return(0,o.jsxs)(r.E.div,{initial:{y:100,opacity:0},transition:{duration:.5},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"p-[30px] flex flex-col space-y-[40px]",children:[b&&(0,o.jsx)("div",{children:(0,o.jsx)(w.Z,{children:(0,o.jsx)(k.Z,{control:(0,o.jsx)(A.Z,{checked:null==n?void 0:n.donateAnonymously,onClick:t}),label:"Donate anonymously"})})}),!(null==n?void 0:n.donateAnonymously)&&(0,o.jsxs)(w.Z,{className:"space-y-[40px]",children:[(null==n?void 0:n.donateAs)==="organisation"&&(0,o.jsx)("div",{className:"flex",children:(0,o.jsx)(P.Z,{label:"Company name",placeholder:"Enter company name",variant:"standard",fullWidth:!0,value:null==n?void 0:n.companyName,onChange:e=>{i(e.target.value)}})}),(0,o.jsxs)("div",{className:"flex justify-between space-x-5",children:[(0,o.jsx)(P.Z,{label:"First name",placeholder:"Enter first name",variant:"standard",className:"flex-1",value:null==n?void 0:n.firstName,onChange:e=>{a(e.target.value)}}),(0,o.jsx)(P.Z,{label:"Last name",placeholder:"Enter last name",variant:"standard",className:"flex-1",value:null==n?void 0:n.lastName,onChange:e=>{s(e.target.value)}})]}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("div",{children:(0,o.jsx)(P.Z,{label:"Email",placeholder:"Enter email",variant:"standard",fullWidth:!0,type:"email",value:null==n?void 0:n.email,onChange:e=>{v(e.target.value)},onBlur:()=>{(null==n?void 0:n.email.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/))?j(""):j("Please enter a valid email address")}})}),(null==n?void 0:n.emailError)&&(0,o.jsx)("div",{className:"mt-[5px] text-[#ed1c24] text-xs",children:null==n?void 0:n.emailError})]}),(0,o.jsxs)("div",{className:"flex justify-between space-x-5",children:[(0,o.jsxs)(c.Z,{variant:"standard",className:"flex-1 ",children:[(0,o.jsx)(m.Z,{id:"demo-simple-select-standard-label",children:"Country"}),(0,o.jsx)(u.Z,{label:"Country",placeholder:"Enter Country",variant:"standard",fullWidth:!0,value:null==n?void 0:n.country,onChange:(e,n)=>{x(e.target.value)},children:f.map(e=>{let{label:n,id:t}=e;return(0,o.jsx)(p.Z,{value:n,children:n},t)})})]}),(null==n?void 0:n.country)==="Kenya"&&(0,o.jsxs)(c.Z,{variant:"standard",className:"flex-1",children:[(0,o.jsx)(m.Z,{id:"demo-simple-select-standard-label",children:"County"}),(0,o.jsx)(u.Z,{label:"County",placeholder:"Enter County",variant:"standard",value:null==n?void 0:n.county,onChange:e=>{h(e.target.value)},fullWidth:!0,children:g.map(e=>{let{label:n,value:t}=e;return(0,o.jsx)(p.Z,{value:n,children:n},t)})})]})]}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)(P.Z,{label:"Phone",variant:"standard",value:null==n?void 0:n.phoneCode,sx:{width:"50px","&:disabled":{color:"black !important"}}}),(0,o.jsx)(P.Z,{label:" ",placeholder:"Enter phone",variant:"standard",fullWidth:!0,value:null==n?void 0:n.phoneNumber,onChange:e=>{y(e.target.value)}})]}),(0,o.jsx)("div",{className:"flex mb-[40px]",children:(0,o.jsx)(P.Z,{label:"Physical address",placeholder:"Enter physical address",variant:"standard",fullWidth:!0,value:null==n?void 0:n.address,onChange:e=>{d(e.target.value)}})})]})]})},helpers_getImageBase=()=>"/public";let getPaymentOptions=e=>"USD"===e?["Card"]:["Mpesa","Card"];var components_DonationFormPayment=e=>{let{}=e,n=helpers_getImageBase(),{donationFormDetails:t,setPaymentOption:a,setDonationAmount:i,setPhoneNumber:d}=(0,l.useContext)(E.DonationFormContext),c=getPaymentOptions(null==t?void 0:t.selectedCurrency);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(r.E.div,{initial:{y:100,opacity:0},transition:{duration:.5},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"space-y-[40px]",children:[(0,o.jsx)("div",{className:"flex mt-[20px]",children:(0,o.jsx)(g.Z,{value:null==t?void 0:t.paymentOption,variant:"scrollable",scrollButtons:!0,allowScrollButtonsMobile:!0,children:c.map(e=>(0,o.jsx)(b.Z,{label:e,value:e,onClick:()=>a(e)},e))})}),(null==t?void 0:t.paymentOption)==="Mpesa"&&(0,o.jsx)("div",{className:"flex justify-center min-h-[250px]",children:(0,o.jsxs)("div",{className:"flex flex-col justify-center space-y-[40px] w-[300px]",children:[(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)(P.Z,{label:"Phone",variant:"standard",value:null==t?void 0:t.phoneCode,sx:{width:"50px","&:disabled":{color:"black !important"}}}),(0,o.jsx)(P.Z,{label:" ",placeholder:"Enter Mpesa number",variant:"standard",value:null==t?void 0:t.phoneNumber,onChange:e=>{d(e.target.value)}})]}),(0,o.jsx)(P.Z,{label:"Amount",placeholder:"Enter amount",variant:"standard",value:"".concat((null==t?void 0:t.handleProcessingFee)?null==t?void 0:t.totalDonationAmount:null==t?void 0:t.donationAmount),onChange:e=>{(null==t?void 0:t.handleProcessingFee)||i(e.target.value)}})]})}),(null==t?void 0:t.paymentOption)==="Card"&&(0,o.jsx)("div",{className:"flex justify-center texr-center pb-[50px]",children:(0,o.jsx)("div",{children:(0,o.jsx)(s(),{src:"".concat(n,"/card-payment.jpeg"),alt:"",height:75,width:300,loader:()=>"".concat(n,"/card-payment.jpeg"),style:{objectFit:"cover"}})})}),(null==t?void 0:t.paymentOption)==="Airtel Money"&&(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:"To make payment, follow these steps:"}),(0,o.jsx)("div",{className:"flex p-[20px]",children:(0,o.jsxs)("ol",{className:"text-gray-500 mt-[20px] list-outside list-decimal",children:[(0,o.jsx)("li",{children:"Go to Airtel on your phone."}),(0,o.jsx)("li",{children:"Select 'Send Money'."}),(0,o.jsx)("li",{children:"Enter 'Nick Name': Redcross."}),(0,o.jsx)("li",{children:"Enter your Airtel PIN."}),(0,o.jsx)("li",{children:"Enter the reference: leave it blank."}),(0,o.jsx)("li",{children:"You will receive an SMS from Airtel."})]})})]}),(null==t?void 0:t.paymentOption)==="TKash"&&(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:"To make payment, follow these steps:"}),(0,o.jsx)("div",{className:"flex p-[20px]",children:(0,o.jsxs)("ol",{className:"text-gray-500 mt-[20px] list-outside list-decimal",children:[(0,o.jsx)("li",{children:"Go to Tkash menu on your phone or Use the T-kash App."}),(0,o.jsx)("li",{children:"Select “Paybill”"}),(0,o.jsx)("li",{children:"Select “T-kash Paybill”."}),(0,o.jsx)("li",{children:"Enter “Paybill Number”"}),(0,o.jsx)("li",{children:"Enter “Campaign”"}),(0,o.jsxs)("li",{children:["Enter"," ","".concat((null==t?void 0:t.handleProcessingFee)?null==t?void 0:t.totalDonationAmount:null==t?void 0:t.donationAmount)]}),(0,o.jsx)("li",{children:"Confirm transaction."}),(0,o.jsx)("li",{children:"Enter T-kash PIN."}),(0,o.jsx)("li",{children:"You will receive a confirmation SMS from T-kash."})]})})]})]})})};let I=["Cause","Amount","Donate","Pay"];var components_DonationForm=e=>{let{step:n,onContinue:t,onBack:a}=e,{donationFormDetails:s}=(0,l.useContext)(E.DonationFormContext),{selectedCause:i}=(0,l.useContext)(_.RedcrossCausesContext),[r,c]=(0,l.useState)(!1),{isSubmitting:u,donationAmount:m,donationOption:p,firstName:g,lastName:b,email:C,phoneNumber:N,address:w,donateAnonymously:k,country:A,county:Z,emailError:S}=s;(0,l.useEffect)(()=>u?c(!0):1===n?c(!m||!p):2===n?c(!k&&(!g||!b||!C||C&&""!==S||!N||"Kenya"===A&&!Z)):3===n?c(u):void 0,[u,m,n,p,u,g,b,C,N,w,k,A,Z,S]);let D=n<3||3===n&&((null==s?void 0:s.paymentOption)==="Mpesa"||(null==s?void 0:s.paymentOption)==="Card");return(0,o.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,o.jsxs)("div",{className:"sticky top-0 z-30 bg-white",children:[(0,o.jsx)(x.Z,{activeStep:n,alternativeLabel:!0,className:"px-[10px] py-[20px]",children:I.map(e=>(0,o.jsx)(h.Z,{children:(0,o.jsx)(v.Z,{children:e})},e))}),(0,o.jsx)(y.Z,{})]}),(0,o.jsxs)("div",{className:"",children:[1===n&&(0,o.jsx)(components_DonationFormAmount,{}),2===n&&(0,o.jsx)(components_DonationFormPersonalDetails,{}),3===n&&(0,o.jsx)(components_DonationFormPayment,{})]}),(0,o.jsxs)("div",{className:"sticky bottom-0 z-50 bg-white",children:[(0,o.jsx)(y.Z,{}),(0,o.jsxs)(j.Z,{className:"flex flex-col p-5",children:[(0,o.jsx)("div",{className:"flex text-left",children:2===n&&(0,o.jsxs)("p",{className:"mb-5 text-sm text-gray-500",children:["You are donating",(0,o.jsx)("span",{className:"text-[#ed1c24]",children:" ".concat(null==s?void 0:s.selectedCurrency," ").concat((null==s?void 0:s.handleProcessingFee)?null==s?void 0:s.totalDonationAmount:null==s?void 0:s.donationAmount)})," ","to ".concat(null==i?void 0:i.label)]})}),D&&(0,o.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[(0,o.jsx)("div",{children:(0,o.jsx)(d.Z,{className:"px-[10px] justify-start",variant:"outlined",onClick:a,children:"Back"})}),(0,o.jsx)("div",{children:(0,o.jsxs)(d.Z,{onClick:t,startIcon:(null==s?void 0:s.isSubmitting)?(0,o.jsx)(f.Z,{size:20}):null,disabled:r,variant:"outlined",color:"primary",children:[(n<2||2===n&&(null==s?void 0:s.donationOption)==="donate-now")&&"Continue",2===n&&(null==s?void 0:s.donationOption)==="make-pledge"&&"Make ".concat(null==s?void 0:s.selectedCurrency," ").concat((null==s?void 0:s.handleProcessingFee)?null==s?void 0:s.totalDonationAmount:null==s?void 0:s.donationAmount," pledge"),3===n&&"Donate ".concat(null==s?void 0:s.selectedCurrency," ").concat((null==s?void 0:s.handleProcessingFee)?null==s?void 0:s.totalDonationAmount:null==s?void 0:s.donationAmount)]})})]})]})]})]})},M=t(3948),T=t(8595);let R=(0,T.Z)({palette:{primary:{main:"#ed1c24"},secondary:{main:"#f8f9fa"}},typography:{fontFamily:"Rubik, sans-serif"},components:{MuiButton:{styleOverrides:{root:{"&:hover":{backgroundColor:"#ed1c24",color:"white"},"&.active":{backgroundColor:"#ed1c24",color:"white"}}}}}});var components_InvisibleForm=()=>{let{donationFormDetails:e}=(0,l.useContext)(E.DonationFormContext),{traceId:n,token:t,merchantCode:a,referenceId:s,callbackUrl:i,extraData:r}=e;return console.log({traceId:n,token:t,merchantCode:a,referenceId:s,extraData:r,callbackUrl:i}),(0,l.useEffect)(()=>{if(n&&t&&a&&s){var e;null===(e=document.getElementById("button"))||void 0===e||e.click()}},[n,t,a,s]),(0,o.jsxs)("form",{id:"submitCheckout",action:"https://v3.jengapgw.io/processPayment",method:"POST",children:[(0,o.jsx)("input",{type:"hidden",id:"token",value:t,"v-model":t,name:"token"}),(0,o.jsx)("input",{type:"hidden",id:"merchantCode","v-model":a,name:"merchantCode",value:a}),(0,o.jsx)("input",{type:"hidden",id:"currency",value:null==e?void 0:e.selectedCurrency,name:"currency"}),(0,o.jsx)("input",{type:"hidden",id:"orderAmount",value:(null==e?void 0:e.handleProcessingFee)?e.totalDonationAmount:null==e?void 0:e.donationAmount,name:"orderAmount"}),(0,o.jsx)("input",{type:"hidden",id:"orderReference",value:s,name:"orderReference"}),(0,o.jsx)("input",{type:"hidden",id:"productType",value:"CheckoutItem",name:"productType"}),(0,o.jsx)("input",{type:"hidden",id:"productDescription",value:"donation",name:"productDescription"}),(0,o.jsx)("input",{type:"hidden",id:"customerFirstName",value:null==e?void 0:e.firstName,name:"customerFirstName"}),(0,o.jsx)("input",{type:"hidden",id:"customerLastName",value:null==e?void 0:e.lastName,name:"customerLastName"}),(0,o.jsx)("input",{type:"hidden",id:"customerPostalCodeZip",value:"000",name:"customerPostalCodeZip "}),(0,o.jsx)("input",{type:"hidden",id:"customerAddress",value:null==e?void 0:e.address,name:" customerAddress "}),(0,o.jsx)("input",{type:"hidden",id:"customerEmail",value:null==e?void 0:e.email,name:"customerEmail"}),(0,o.jsx)("input",{type:"hidden",id:"customerPhone",value:null==e?void 0:e.phoneNumber}),(0,o.jsx)("input",{type:"hidden",id:"extraData",value:r,name:"extraData"}),(0,o.jsx)("input",{type:"hidden",id:"callbackUrl",value:i,name:"callbackUrl"}),(0,o.jsx)("input",{type:"hidden",id:"countryCode",value:"KE",name:"countryCode"}),(0,o.jsx)("input",{className:"hidden",type:"submit",id:"button"})]})},B=t(2173);let onSubmit=async e=>{let{setIsSubmitting:n,donationFormDetails:t,selectedCauseId:o}=e;n(!0),console.log({donationFormDetails:t});let{selectedCurrency:l,donateAs:a,firstName:s,lastName:i,companyName:r,phoneNumber:d,address:c,county:u,country:m,donationAmount:p,totalDonationAmount:x,handleProcessingFee:h,donateAnonymously:v,email:y,donationOption:j,pledgeFrequency:f,processingFee:g,paymentOption:b}=t;try{let e=await B.Z.post("https://".concat("donations.redcross.or.ke","/api/donate"),{currency:"KES"===l?1:2,donorType:"private"===a?1:2,campaignId:o,firstName:v?"Anonymous":s,lastName:v?"Anonymous":i,companyName:v?"Anonymous":r,phoneNumber:v?0:d,address:v?"Anonymous":c,county:v?"Anonymous":u,country:v?"Anonymous":m,email:v?"Anonymous":y,amount:h?x:p,paymentMethod:"Mpesa"===b?1:2,pledgeFrequency:f,processingFee:h?g:null}),{data:{donationId:C}}=e;if(C){let e={reference_id:C.toString(),amount:h?x:p,currency:null==t?void 0:t.selectedCurrency,callback_url:"https://".concat("donations.redcross.or.ke","/api/process-payment"),redirect_url:"https://".concat("donations.redcross.or.ke","/status?id=").concat(C),msisdn:null==t?void 0:t.phoneNumber,email:null==t?void 0:t.email,address:null==t?void 0:t.address,state:null==t?void 0:t.county,country:null==t?void 0:t.country},o=JSON.stringify({...e,first_name:null==t?void 0:t.firstName,last_name:null==t?void 0:t.lastName,express_mpesa:(null==t?void 0:t.paymentOption)==="Mpesa"}),l=JSON.stringify({...e,notification_channels:"email",name:"".concat(null==t?void 0:t.firstName," ").concat(null==t?void 0:t.lastName)});try{let e=await B.Z.request({url:"donate-now"===j?"https://ke.finsprint.io/api/v1/request-checkout":"https://ke.finsprint.io/api/v1/invoices/create",method:"POST",headers:{Accept:"*/*","Content-Type":"application/json",Authorization:"Bearer 8|z3ENPPlGqifZ09GfnHQhfpKWMvvm6tDwZ1k5IW1v"},data:"donate-now"===j?o:l}),{status:t,data:{url:a,trace_id:s,reference_id:i,extra_data:{jenga:{token:r,merchantCode:d,extraData:c,callbackUrl:u}}}}=e;if(200===t)return{url:a,traceId:s,referenceId:i,token:r,merchantCode:d,extraData:c,callbackUrl:u};n(!1)}catch(e){console.error(e),n(!1)}finally{n(!1)}}}catch(e){console.log(e),n(!1)}finally{n(!1)}};var page=()=>{let e=helpers_getImageBase(),{push:n}=(0,i.useRouter)(),[t,a]=(0,l.useState)(0),d="Donate today to support humanitarian work around Kenya. In times\n								of crisis, we meet the urgent needs of women, men, young and the\n								old. Help enable a rapid response to disasters. Your\n								contribution can make a difference.",{redCrossCauses:c,selectedCause:u,onRedCrossCauseSelect:m}=(0,l.useContext)(_.RedcrossCausesContext),{setIsSubmitting:p,donationFormDetails:x,setSubmissionComplete:h,setCardToken:v}=(0,l.useContext)(E.DonationFormContext),y=(null==u?void 0:u.id)||"",handleContinue=async()=>{if((t>=0&&t<2||2===t&&(null==x?void 0:x.donationOption)==="donate-now")&&a(t+1),3===t||2===t&&(null==x?void 0:x.donationOption)==="make-pledge")try{let e=await onSubmit({setIsSubmitting:p,donationFormDetails:x,selectedCauseId:y}),{referenceId:t}=e;((null==x?void 0:x.paymentOption)==="Mpesa"||(null==x?void 0:x.donationOption)==="make-pledge")&&(h(!0),n("/status?id=".concat(t))),(null==x?void 0:x.paymentOption)==="Card"&&((null==x?void 0:x.donationOption)==="donate-now"?v(e):n("/status?id=".concat(t)))}catch(e){console.error(e)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(M.Z,{theme:R,children:(0,o.jsxs)("main",{className:"flex w-full bg-[#f8f9fa]",children:[(0,o.jsxs)("div",{className:"relative flex-col justify-center flex-1 hidden md:flex h-[650px] bg-[#f8f9fa] overflow-hidden",children:[(0,o.jsx)("div",{className:"flex justify-end w-full",children:(0,o.jsx)(s(),{className:"z-10",src:"".concat(e,"/hero.jpg"),alt:"redcross image",fill:!0,loader:()=>"".concat(e,"/hero.jpg"),style:{objectFit:"cover"}})}),u&&t>0&&(0,o.jsx)(r.E.div,{initial:{x:-100,opacity:0},transition:{duration:.5},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"z-50 absolute w-full right-0 h-[250px] bg-[#ed1c24] text-white flex flex-col text-center justify-center",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-5xl font-bold",children:"Support ".concat(null==u?void 0:u.label)}),(0,o.jsx)("p",{className:"px-5 mt-5",children:(null==u?void 0:u.description)||d})]})})]}),0===t&&(0,o.jsxs)("div",{className:"flex flex-col md:justify-center flex-1 text-center space-y-[50px] bg-white",children:[(0,o.jsxs)("div",{className:"bg-[#ed1c24] text-white p-[20px] md:py-[40px] md:px-[20px] min-h-[250px]",children:[(0,o.jsx)("h1",{className:"text-5xl font-bold",children:"Support ".concat((null==u?void 0:u.label)||"our Cause")}),(0,o.jsx)("p",{className:"px-5 mt-5",children:(null==u?void 0:u.description)||d})]}),(0,o.jsx)("div",{children:(0,o.jsx)(components_SelectDropdown,{dropDownOptions:c,selectedOption:(null==u?void 0:u.value)||"",onChange:e=>{m(e.target.value)}})}),(0,o.jsx)("div",{children:(0,o.jsx)(components_Button,{className:"py-[10px] px-[40px]",onClick:handleContinue,disabled:!u,children:"Continue"})})]}),t>0&&(0,o.jsx)(r.E.div,{initial:{x:100,opacity:0},transition:{duration:.5},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"flex flex-col flex-1 bg-white space-y-[20px] md:h-[650px] overflow-y-scroll px-10",children:(0,o.jsx)(components_DonationForm,{step:t,onBack:()=>{t>=0&&t<4&&a(t-1)},onContinue:handleContinue})})]})}),(0,o.jsx)(components_InvisibleForm,{})]})}},1833:function(e,n,t){"use strict";t.r(n),t.d(n,{DonationFormContext:function(){return r}});var o=t(7437),l=t(2265),a=t(2173),s=t(405);t(9845);let i={donateAs:"private",donationOption:"donate-now",selectedCurrency:"KES",handleProcessingFee:!1,donateAnonymously:!1,donationAmount:"",processingFee:"",totalDonationAmount:"",paymentOption:"Mpesa",companyName:"",firstName:"",lastName:"",email:"",phoneNumber:"",country:"Kenya",county:"",address:"",recommended:[],isSubmitting:!1,submissionComplete:!1,emailError:"",phoneCode:"+254",pledgeFrequency:"one-time"},r=(0,l.createContext)({donationFormDetails:i,setDonateAs:()=>{},setSelectedCurrency:()=>{},setDonationOption:()=>{},toggleHandleProcessingFee:()=>{},setDonateAnonymously:()=>{},setDonationAmount:()=>{},setPaymentOption:()=>{},setFirstName:()=>{},setLastName:()=>{},setCompanyName:()=>{},setEmail:()=>{},setPhoneNumber:()=>{},setCountry:()=>{},setCounty:()=>{},setAddress:()=>{},setSubmissionComplete:()=>{},setIsSubmitting:()=>{},setCardToken:()=>{},resetDonationForm:()=>{},setEmailError:()=>{},setPledgeFrequency:()=>{}});n.default=e=>{let{children:n}=e,[t,d]=(0,l.useState)(i),{selectedCause:c,countries:u}=(0,l.useContext)(s.RedcrossCausesContext),m=(null==c?void 0:c.id)||"",setRecommended=e=>{d({...t,recommended:e})},setTotalDonationAmount=e=>{d({...t,totalDonationAmount:e})},{donationAmount:p,handleProcessingFee:x,processingFee:h}=t;(0,l.useEffect)(()=>{if(x)return setTotalDonationAmount((Number(p)+Math.ceil(Number(h))).toString())},[p,x,h]);let{selectedCurrency:v,donateAs:y}=t;return(0,l.useEffect)(()=>{let fetchRecommended=async()=>{try{let e=await a.Z.post("https://".concat("donations.redcross.or.ke","/api/recommended"),{currency:"KES"===v?1:2,donorType:"private"===y?1:2,campaignId:m}),{data:n}=e,t=[];if(n.length&&n.forEach(e=>{let{Amount:n}=e;t.push(n)}),t.length>0)return setRecommended(t);return setRecommended([])}catch(e){console.error(e)}};fetchRecommended()},[v,y,m]),(0,o.jsx)(r.Provider,{value:{donationFormDetails:t,setDonateAs:e=>{d({...t,donateAs:e,donateAnonymously:"organisation"===e&&!1})},setSelectedCurrency:e=>{d({...t,selectedCurrency:e,donationAmount:"",paymentOption:"USD"===e?"Card":t.paymentOption})},setDonationOption:e=>{d({...t,donationOption:e,paymentOption:"donate-now"===e?"Mpesa":"",donateAnonymously:"make-pledge"===e&&!1})},toggleHandleProcessingFee:()=>{d({...t,handleProcessingFee:!t.handleProcessingFee})},setDonateAnonymously:()=>{d({...t,donateAnonymously:!t.donateAnonymously})},setDonationAmount:e=>{let n=Math.ceil(.035*Number(e)),o=(Number(e)+n).toString();d({...t,donationAmount:e,processingFee:n.toString(),totalDonationAmount:o})},setPaymentOption:e=>{d({...t,paymentOption:e})},setFirstName:e=>{d({...t,firstName:e})},setLastName:e=>{d({...t,lastName:e})},setCompanyName:e=>{d({...t,companyName:e})},setAddress:e=>{d({...t,address:e})},setCountry:e=>{let n=u.find(n=>n.label===e).phoneCode;d({...t,country:e,phoneCode:"+".concat(n)})},setCounty:e=>{d({...t,county:e})},setEmail:e=>{d({...t,email:e})},setPhoneNumber:e=>{d({...t,phoneNumber:e})},setSubmissionComplete:e=>{d({...t,submissionComplete:e,isSubmitting:!1})},setIsSubmitting:e=>{d({...t,isSubmitting:e})},setCardToken:e=>{d({...t,...e})},resetDonationForm:()=>{d({...t,...i})},setEmailError:e=>{d({...t,emailError:e})},setPledgeFrequency:e=>{d({...t,pledgeFrequency:e})}},children:n})}},405:function(e,n,t){"use strict";t.r(n),t.d(n,{RedcrossCausesContext:function(){return s}});var o=t(7437),l=t(2265),a=t(2173);t(9845);let s=(0,l.createContext)({redCrossCauses:[],selectedCause:null,onRedCrossCauseSelect:()=>{},countries:[],counties:[],setSelectedCause:()=>{}});n.default=e=>{let{children:n}=e,[t,i]=(0,l.useState)([]),[r,d]=(0,l.useState)([]),[c,u]=(0,l.useState)([]),[m,p]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let fetchCampaigns=async()=>{try{let e=await a.Z.get("https://".concat("donations.redcross.or.ke","/api/campaigns")),{data:n}=e,t=n.map(e=>{let{id:n,name:t,description:o,start_date:l,end_date:a}=e;return{id:n,label:t,value:t,description:o,startDate:l,endDate:a}}),o=t.find(e=>"Where it matters"===e.label);return p(o),i(t)}catch(e){console.error(e)}};fetchCampaigns()},[]),(0,l.useEffect)(()=>{let fetchCountries=async()=>{try{let e=await a.Z.get("https://".concat("donations.redcross.or.ke","/api/countries")),{data:n}=e,t=n.map(e=>{let{nicename:n,iso3:t,id:o,phonecode:l}=e;return{id:o,value:t,label:n,phoneCode:l}});return d(t)}catch(e){console.error(e)}};fetchCountries()},[]),(0,l.useEffect)(()=>{let fetchCounties=async()=>{try{let e=await a.Z.get("https://".concat("donations.redcross.or.ke","/api/counties")),{data:n}=e,t=n.map(e=>{let{name:n}=e;return{value:n,label:n}});return u(t)}catch(e){console.error(e)}};fetchCounties()},[]),(0,o.jsx)(s.Provider,{value:{redCrossCauses:t,selectedCause:m,onRedCrossCauseSelect:e=>{let n=t.find(n=>n.value===e);return void 0!==n?p(n):p(null)},countries:r,counties:c,setSelectedCause:p},children:n})}}},function(e){e.O(0,[218,191,926,792,796,971,472,744],function(){return e(e.s=1554)}),_N_E=e.O()}]);